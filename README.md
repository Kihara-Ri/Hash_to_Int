# HASH to Integer

## Introduction

这个小程序是我出于无聊写的，总体功能就是讲一个字符串通过 SHA-256 加密后再取其一部分映射为一个整数

在此我的最初目的只是为了给我的静态页面选一个随机的端口。你知道的，像我们这样的人很难做一个没有任何理由的选择，所以我不得不为自己强行找一个理由

因此我的映射目标为0-65535，这意味着我只需要取哈希值的前两个字节(这是两个16进制数)就完成任务了

## Evaluation

因为程序本身特别简单，没什么讲的必要，不过我却对这种方法本身的可靠性评估有点感兴趣，即：

分析这种方法可能出现的**重复**的情况，或者叫*哈希冲突*，即不同的输入字符串映射到相同的整数值的概率

哈希函数接收一个任意大小的输入，并返回一个固定大小的256位哈希值，因此理论上可能的哈希值总数为

$$
2^{256} \approx 1.1579209 \times 10^{77}
$$

这里我们将输入的字符串简化限制为10个字符，此时最大可能的输入数量为$62^{10}$，约为829万亿种可能

根据生日悖论，我们可以知道碰撞发生概率的计算方法:

$$
P(collision) \approx 1 - \prod_{i=1}^{n-1}\big( \frac{65536-i}{65536} \big)
$$

对于字符串的碰撞计算，可以使用上面的公式，其中$n$表示生成的字符串总数

当生成约 256 个字符串时，碰撞的概率大约为50%

由于加密的可能性总数太大，因此字符串出现碰撞的可能性几乎只与我们最后映射目标，即0-65535这个范围的大小有关

考虑到部署网站的实际需求，这个碰撞的可能性也远远够用了
